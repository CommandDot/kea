webpackJsonp([3],{498:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"default",function(){return g});var o=n(10),i=n.n(o),l=n(54),c=(n.n(l),n(133),n(200)),u=n(584),p=n(587),m=n(588),f=n(589),h=(n(515),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),d={input:n(590),listeners:n(591),api:n(592),reducers:n(593),api2:n(594),view:n(595),call:n(596),put:n(597),selector:n(598),full:n(599)},g=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),h(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"counter-singleton-scene"},i.a.createElement("div",{className:"description"},i.a.createElement("h2",null,"Example - Github API"),i.a.createElement("p",null,"In this guide we are going to build a component that asks for an username and then fetches all the repositories for that user on Github."),i.a.createElement("p",null,"The final result will look like this:"),i.a.createElement("div",{className:"demo"},i.a.createElement(p.a,null))),i.a.createElement("div",{className:"description"},i.a.createElement(u.a,null)),i.a.createElement("div",{className:"description"},i.a.createElement("h2",null,"1. Input the username"),i.a.createElement("p",null,"Now that you have seen the end result, let's build it, piece by piece."),i.a.createElement("p",null,"The first thing we want to do is to have an input field to enter the username and store it in kea:"),i.a.createElement(c.default,{className:"javascript"},d.input),i.a.createElement("p",null,"Live demo:"),i.a.createElement("div",{className:"demo"},i.a.createElement(m.a,null))),i.a.createElement("div",{className:"description"},i.a.createElement("h2",null,"2. Capture calls ",i.a.createElement("code",null,"setUsername")," and trigger an API call"),i.a.createElement("p",null,"The next step is to listen for the  ",i.a.createElement("code",null,"setUsername")," action and run some code whenever it has been dispatched:"),i.a.createElement(c.default,{className:"javascript"},d.listeners)),i.a.createElement("div",{className:"description"},i.a.createElement("h2",null,"3. Trigger the actual call"),i.a.createElement("p",null,"We must ask Github for data about this user."),i.a.createElement("p",null,"For this we'll use the standard ",i.a.createElement("code",null,"window.Fetch")," API. We also add 300 milliseconds of debounce before actually making the call, to give the user time to add another keystroke:"),i.a.createElement(c.default,{className:"javascript"},d.api)),i.a.createElement("div",{className:"description"},i.a.createElement("h2",null,"4. Store the response of the call"),i.a.createElement("p",null,"Now that we get the repositories, where to put them?"),i.a.createElement("p",null,"The answer: in a few new reducers."),i.a.createElement("p",null,"We're interested in 3 things:"),i.a.createElement("ol",null,i.a.createElement("li",null,"Whether we're currently fetching and data: ",i.a.createElement("code",null,"isLoading")),i.a.createElement("li",null,"The repositories that we have fetched: ",i.a.createElement("code",null,"repositories")),i.a.createElement("li",null,"Any error that might have occurred: ",i.a.createElement("code",null,"error"))),i.a.createElement("p",null,"We can get all of this by just adding two new actions:"),i.a.createElement("ol",null,i.a.createElement("li",null,"One to set the repositories: ",i.a.createElement("code",null,"setRepositories")),i.a.createElement("li",null,"One to set the error message: ",i.a.createElement("code",null,"setFetchError"))),i.a.createElement("p",null,"Hooking them up gives the following result:"),i.a.createElement(c.default,{className:"javascript"},d.reducers),i.a.createElement("p",null,"Now we just need to call the right actions from the worker:"),i.a.createElement(c.default,{className:"javascript"},d.api2)),i.a.createElement("div",{className:"description"},i.a.createElement("h2",null,"5. Display the result"),i.a.createElement("p",null,"The last step is to display the repositories to the user. To do this we use the following code:"),i.a.createElement(c.default,{className:"javascript"},d.view),i.a.createElement("p",null,"Giving us the following result:"),i.a.createElement("div",{className:"demo"},i.a.createElement(f.a,null)),i.a.createElement("p",null,"It works! Almost...")),i.a.createElement("div",{className:"description"},i.a.createElement("h2",null,"6. Last steps"),i.a.createElement("p",null,"What's still missing?"),i.a.createElement("p",null,"Well, for starters it would be nice if it would fetch all the respositories on page load."),i.a.createElement("p",null,"Also, it would be great to sort the repositories by the number of stars"),i.a.createElement("p",null,"Let's fix these points!"),i.a.createElement("p",null,"First, to load the repositories on page load, we can use kea's mount events and run an action whenever the logic is mounted:"),i.a.createElement(c.default,{className:"javascript"},d.call),i.a.createElement("p",null,"To stort the results we can create a selector that takes ",i.a.createElement("code",null,"repositories")," as input and outputs a sorted array:"),i.a.createElement(c.default,{className:"javascript"},d.selector),i.a.createElement("p",null,"Now all that's left to do is to replace ",i.a.createElement("code",null,"repositories")," with ",i.a.createElement("code",null,"sortedRepositories")," in your component."),i.a.createElement("p",null,"Because the selectors are made with ",i.a.createElement("code",null,"reselect")," under the hood, you can be sure that they will only be recalculated (resorted in this case) when the original input (repositories) change, not between other renders.")),i.a.createElement("div",{className:"description"},i.a.createElement("h2",null,"7. Final result"),i.a.createElement("p",null,"Adding the finishing touches gives us this final masterpiece:"),i.a.createElement("div",{className:"demo"},i.a.createElement(p.a,null)),i.a.createElement("p",null,"With this code:"),i.a.createElement(c.default,{className:"javascript"},d.full),i.a.createElement("p",null,"There's still one thing that's broken:"),i.a.createElement("p",null,"If a github user or organisation has more than 100 repositories, only the first 100 results will be returned. Github's API provides a way to ask for the next 100 results (the ",i.a.createElement("a",{href:"https://developer.github.com/v3/repos/#response"},i.a.createElement("code",null,"Link")," headers"),"), but as resolving this is outside the scope of this guide, it will be left as an exercise for the reader ;).")))}}]),t}(o.Component)},515:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(55),s=n.n(a),o=n(54),i=(n.n(o),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});t.a=Object(o.kea)({actions:function(){return{toggleFeature:function(e){return{feature:e}}}},reducers:function(e){var t=e.actions;return{features:[{},s.a.object,r({},t.toggleFeature,function(e,t){var n=t.feature;return i({},e,r({},n,!e[n]))})]}}})},584:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return m});var o=n(10),i=n.n(o),l=n(133),c=n(200),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={importListeners:n(585),installListeners:n(586)},m=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h2",null,"0. Install ",i.a.createElement("code",null,"kea-listeners")),i.a.createElement("p",null,"We'll be using listeners in this example. To add support for them, install the ",i.a.createElement("code",null,"kea-listeners")," packages."),i.a.createElement(c.default,{className:"bash"},p.installListeners),i.a.createElement("p",null,"Then import ",i.a.createElement("code",null,"listenersPlugin")," from ",i.a.createElement("code",null,"kea-listeners")," and use it in the ",i.a.createElement("code",null,"plugins")," array in your ",i.a.createElement("code",null,"resetContext()"),"."),i.a.createElement(c.default,{className:"javascript"},p.importListeners),i.a.createElement("p",null,i.a.createElement(l.a,{to:"/effects/listeners"},"Read here for more")))}}]),t}(o.Component)},585:function(e,t){e.exports="import { resetContext } from 'kea'\nimport listenersPlugin from 'kea-saga'\n\nresetContext({\n  plugins: [\n    listenersPlugin\n  ]\n})\n"},586:function(e,t){e.exports="# if using yarn\nyarn add kea-listeners\n\n# if using npm\nnpm install kea-listeners --save\n"},587:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return g});var i,l,c=n(10),u=n.n(c),p=n(55),m=n.n(p),f=n(54),h=(n.n(f),n(84)),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=(i=Object(f.kea)({actions:function(){return{setUsername:function(e){return{username:e}},setRepositories:function(e){return{repositories:e}},setFetchError:function(e){return{message:e}}}},reducers:function(e){var t,n,r,a=e.actions;return{username:["keajs",m.a.string,o({},a.setUsername,function(e,t){return t.username})],repositories:[[],m.a.array,(t={},o(t,a.setUsername,function(){return[]}),o(t,a.setRepositories,function(e,t){return t.repositories}),t)],isLoading:[!0,m.a.bool,(n={},o(n,a.setUsername,function(){return!0}),o(n,a.setRepositories,function(){return!1}),o(n,a.setFetchError,function(){return!1}),n)],error:[null,m.a.string,(r={},o(r,a.setUsername,function(){return null}),o(r,a.setFetchError,function(e,t){return t.message}),r)]}},selectors:function(e){var t=e.selectors;return{sortedRepositories:[function(){return[t.repositories]},function(e){return e.sort(function(e,t){return t.stargazers_count-e.stargazers_count})},m.a.array]}},start:regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.actions.setUsername,e.next=3,this.get("username");case 3:return n=e.sent,e.next=6,Object(h.f)(t(n));case 6:case"end":return e.stop()}},e,this)}),takeLatest:function(e){var t=e.actions,n=e.workers;return o({},t.setUsername,n.fetchRepositories)},workers:{fetchRepositories:regeneratorRuntime.mark(function e(t){var n,r,a,s,o,i,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.actions,r=n.setRepositories,a=n.setFetchError,s=t.payload.username,e.next=4,Object(h.d)(100);case 4:return e.next=6,window.fetch("https://api.github.com/users/"+s+"/repos?per_page=250");case 6:if(o=e.sent,200!==o.status){e.next=15;break}return e.next=10,o.json();case 10:return i=e.sent,e.next=13,Object(h.f)(r(i));case 13:e.next=20;break;case 15:return e.next=17,o.json();case 17:return l=e.sent,e.next=20,Object(h.f)(a(l.message));case 20:case"end":return e.stop()}},e,this)})}}))(l=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),d(t,[{key:"render",value:function(){var e=this.props,t=e.username,n=e.isLoading,r=e.repositories,a=e.sortedRepositories,s=e.error,o=this.actions.setUsername;return u.a.createElement("div",{className:"example-github-scene"},u.a.createElement("div",{style:{marginBottom:20}},u.a.createElement("h1",null,"Search for a github user"),u.a.createElement("input",{value:t,type:"text",onChange:function(e){return o(e.target.value)}})),n?u.a.createElement("div",null,"Loading..."):r.length>0?u.a.createElement("div",null,"Found ",r.length," repositories for user ",t,"!",a.map(function(e){return u.a.createElement("div",{key:e.id},u.a.createElement("a",{href:e.html_url,target:"_blank"},e.full_name)," - ",e.stargazers_count," stars, ",e.forks," forks.")})):u.a.createElement("div",null,s?"Error: "+s:"No repositories found"))}}]),t}(c.Component))||l},588:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return d});var i,l,c=n(10),u=n.n(c),p=n(55),m=n.n(p),f=n(54),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),d=(i=Object(f.kea)({actions:function(){return{setUsername:function(e){return{username:e}}}},reducers:function(e){var t=e.actions;return{username:["keajs",m.a.string,o({},t.setUsername,function(e,t){return t.username})]}}}))(l=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),h(t,[{key:"render",value:function(){var e=this.props.username,t=this.actions.setUsername;return u.a.createElement("div",{className:"example-github-scene"},u.a.createElement("div",{style:{marginBottom:20}},u.a.createElement("h1",null,"Search for a github user"),u.a.createElement("input",{value:e,type:"text",onChange:function(e){return t(e.target.value)}})),u.a.createElement("div",null,"Repos will come here..."))}}]),t}(c.Component))||l},589:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return g});var i,l,c=n(10),u=n.n(c),p=n(55),m=n.n(p),f=n(54),h=(n.n(f),n(84)),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=(i=Object(f.kea)({actions:function(){return{setUsername:function(e){return{username:e}},setRepositories:function(e){return{repositories:e}},setFetchError:function(e){return{message:e}}}},reducers:function(e){var t,n,r,a=e.actions;return{username:["keajs",m.a.string,o({},a.setUsername,function(e,t){return t.username})],repositories:[[],m.a.array,(t={},o(t,a.setUsername,function(){return[]}),o(t,a.setRepositories,function(e,t){return t.repositories}),t)],isLoading:[!1,m.a.bool,(n={},o(n,a.setUsername,function(){return!0}),o(n,a.setRepositories,function(){return!1}),o(n,a.setFetchError,function(){return!1}),n)],error:[null,m.a.string,(r={},o(r,a.setUsername,function(){return null}),o(r,a.setFetchError,function(e,t){return t.message}),r)]}},takeLatest:function(e){var t=e.actions,n=e.workers;return o({},t.setUsername,n.fetchRepositories)},workers:{fetchRepositories:regeneratorRuntime.mark(function e(t){var n,r,a,s,o,i,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.actions,r=n.setRepositories,a=n.setFetchError,s=t.payload.username,e.next=4,Object(h.d)(100);case 4:return e.next=6,window.fetch("https://api.github.com/users/"+s+"/repos?per_page=250");case 6:if(o=e.sent,200!==o.status){e.next=15;break}return e.next=10,o.json();case 10:return i=e.sent,e.next=13,Object(h.f)(r(i));case 13:e.next=20;break;case 15:return e.next=17,o.json();case 17:return l=e.sent,e.next=20,Object(h.f)(a(l.message));case 20:case"end":return e.stop()}},e,this)})}}))(l=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),d(t,[{key:"render",value:function(){var e=this.props,t=e.username,n=e.isLoading,r=e.repositories,a=e.error,s=this.actions.setUsername;return u.a.createElement("div",{className:"example-github-scene"},u.a.createElement("div",{style:{marginBottom:20}},u.a.createElement("h1",null,"Search for a github user"),u.a.createElement("input",{value:t,type:"text",onChange:function(e){return s(e.target.value)}})),n?u.a.createElement("div",null,"Loading..."):r.length>0?u.a.createElement("div",null,"Found ",r.length," repositories for user ",t,"!",r.map(function(e){return u.a.createElement("div",{key:e.id},u.a.createElement("a",{href:e.html_url,target:"_blank"},e.full_name)," - ",e.stargazers_count," stars, ",e.forks," forks.")})):u.a.createElement("div",null,a?"Error: "+a:"No repositories found"))}}]),t}(c.Component))||l},590:function(e,t){e.exports="import React from 'react'\nimport { kea, useActions, useValues } from 'kea'\n\nconst logic = kea({\n  actions: () => ({\n    setUsername: (username) => ({ username })\n  }),\n\n  reducers: ({ actions }) => ({\n    username: ['keajs', {\n      [actions.setUsername]: (_, payload) => payload.username\n    }]\n  })\n})\n\nfucntion Github () {\n  render () {\n    const { username } = useValues(logic)\n    const { setUsername } = useActions(logic)\n\n    return (\n      <div className='example-github-scene'>\n        <div style={{marginBottom: 20}}>\n          <h1>Search for a github user</h1>\n          <input\n            value={username}\n            type='text'\n            onChange={e => setUsername(e.target.value)} />\n        </div>\n        <div>\n          Repos will come here...\n        </div>\n      </div>\n    )\n  }\n}\n"},591:function(e,t){e.exports="const logic = kea({\n  actions: () => ({\n    setUsername: (username) => ({ username })\n  }),\n\n  reducers: ({ actions }) => ({\n    username: ['keajs', {\n      [actions.setUsername]: (_, payload) => payload.username\n    }]\n  })\n\n  listeners: ({ actions }) => ({\n    [actions.setUsername]: ({ username }) => {\n      /// ...\n    }\n  })\n})\n"},592:function(e,t){e.exports="const API_URL = 'https://api.github.com'\n\nconst logic = kea({\n  // ...\n\n  listeners: ({ actions }) => ({\n    [actions.setUsername]: async ({ username }, breakpoint) => {\n      await breakpoint(300) // debounce for 300ms\n\n      const url = `${API_URL}/users/${username}/repos?per_page=250`\n      const response = await window.fetch(url)\n\n      breakpoint() // break if action was dispatched again while we were fetching\n\n      const json = await response.json()\n\n      if (response.status === 200) {\n        // we have the repositories in `json`\n        // what to do with them?\n      } else {\n        // there is an error in `json.message`\n        // what to do with it?\n      }\n    }\n  })\n})\n"},593:function(e,t){e.exports="const logic = kea({\n  actions: () => ({\n    setUsername: (username) => ({ username }),\n    setRepositories: (repositories) => ({ repositories }),\n    setFetchError: (message) => ({ message })\n  }),\n\n  reducers: ({ actions }) => ({\n    username: ['keajs', {\n      [actions.setUsername]: (_, payload) => payload.username\n    }],\n    repositories: [[], {\n      [actions.setUsername]: () => [],\n      [actions.setRepositories]: (_, payload) => payload.repositories\n    }],\n    isLoading: [false, {\n      [actions.setUsername]: () => true,\n      [actions.setRepositories]: () => false,\n      [actions.setFetchError]: () => false\n    }],\n    error: [null, {\n      [actions.setUsername]: () => null,\n      [actions.setFetchError]: (_, payload) => payload.message\n    }]\n  }),\n\n  listeners: ({ actions }) => ({\n    // ...\n  })\n})\n"},594:function(e,t){e.exports="const API_URL = 'https://api.github.com'\n\nconst logic = kea({\n  // ...\n\n  listeners: ({ actions }) => ({\n    [actions.setUsername]: async ({ username }, breakpoint) => {\n      await breakpoint(300) // debounce for 300ms\n\n      const url = `${API_URL}/users/${username}/repos?per_page=250`\n      const response = await window.fetch(url)\n\n      // break if the same action was dispatched again while we were fetching for fetch\n      breakpoint()\n\n      const json = await response.json()\n\n      if (response.status === 200) {\n        actions.setRepositories(json)         // <-- new\n      } else {\n        actions.setFetchError(json.message)   // <-- new\n      }\n    }\n  })\n})\n"},595:function(e,t){e.exports="function Github () {\n  const { username, isLoading, repositories, error } = useValues(logic)\n  const { setUsername } = useActions(logic)\n\n  return (\n    <div className='example-github-scene'>\n      <div style={{marginBottom: 20}}>\n        <h1>Search for a github user</h1>\n        <input\n          value={username}\n          type='text'\n          onChange={e => setUsername(e.target.value)} />\n      </div>\n      {isLoading ? (\n        <div>\n          Loading...\n        </div>\n      ) : repositories.length > 0 ? (\n        <div>\n          Found {repositories.length} repositories for user {username}!\n          {repositories.map(repo => (\n            <div key={repo.id}>\n              <a href={repo.html_url} target='_blank'>{repo.full_name}</a>\n              {' - '}\n              {repo.stargazers_count} stars, {repo.forks} forks.\n            </div>\n          ))}\n        </div>\n      ) : (\n        <div>\n          {error ? `Error: ${error}` : 'No repositories found'}\n        </div>\n      )}\n    </div>\n  )\n}\n"},596:function(e,t){e.exports="const logic = kea({\n  // listeners: ...\n\n  events: ({ actions, values }) => ({\n    afterMount: () {\n      actions.setUsername(values.username)\n    }\n  })\n})\n"},597:function(e,t){e.exports="@kea({\n  start: function * () {\n    const { setUsername } = this.actions\n    const username = yield this.get('username')\n    yield put(setUsername(username))\n  }\n})\n"},598:function(e,t){e.exports="const logic = kea({\n  // ...\n  selectors: ({ selectors }) => ({\n    sortedRepositories: [\n      () => [selectors.repositories],\n      (repositories) => {\n        return repositories.sort((a, b) => b.stargazers_count - a.stargazers_count)\n      }\n    ]\n  })\n})\n"},599:function(e,t){e.exports="import React, { Component } from 'react'\nimport { kea } from 'kea'\n\nconst API_URL = 'https://api.github.com'\n\nconst logic = kea({\n  actions: () => ({\n    setUsername: (username) => ({ username }),\n    setRepositories: (repositories) => ({ repositories }),\n    setFetchError: (message) => ({ message })\n  }),\n\n  reducers: ({ actions }) => ({\n    username: ['keajs', {\n      [actions.setUsername]: (_, payload) => payload.username\n    }],\n    repositories: [[], {\n      [actions.setUsername]: () => [],\n      [actions.setRepositories]: (_, payload) => payload.repositories\n    }],\n    isLoading: [true, {\n      [actions.setUsername]: () => true,\n      [actions.setRepositories]: () => false,\n      [actions.setFetchError]: () => false\n    }],\n    error: [null, {\n      [actions.setUsername]: () => null,\n      [actions.setFetchError]: (_, payload) => payload.message\n    }]\n  }),\n\n  selectors: ({ selectors }) => ({\n    sortedRepositories: [\n      () => [selectors.repositories],\n      (repositories) => repositories.sort(\n                          (a, b) => b.stargazers_count - a.stargazers_count)\n    ]\n  }),\n\n  listeners: ({ actions }) => ({\n    [actions.setUsername]: async ({ username }, breakpoint) => {\n      await breakpoint(300) // debounce for 300ms\n\n      const url = `${API_URL}/users/${username}/repos?per_page=250`\n      const response = await window.fetch(url)\n\n      // break if the same action was dispatched again while we were fetching for fetch\n      breakpoint()\n\n      const json = await response.json()\n\n      if (response.status === 200) {\n        actions.setRepositories(json)         // <-- new\n      } else {\n        actions.setFetchError(json.message)   // <-- new\n      }\n    }\n  })\n})\n\nfunction GithubScene {\n  const { username, isLoading, repositories,\n          sortedRepositories, error } = useValues(logic)\n  const { setUsername } = useActions(logic)\n\n  return (\n    <div className='example-github-scene'>\n      <div style={{marginBottom: 20}}>\n        <h1>Search for a github user</h1>\n        <input value={username}\n              type='text'\n              onChange={e => setUsername(e.target.value)} />\n      </div>\n      {isLoading ? (\n        <div>\n          Loading...\n        </div>\n      ) : repositories.length > 0 ? (\n        <div>\n          Found {repositories.length} repositories for user {username}!\n          {sortedRepositories.map(repo => (\n            <div key={repo.id}>\n              <a href={repo.html_url} target='_blank'>{repo.full_name}</a>\n              {' - '}{repo.stargazers_count} stars, {repo.forks} forks.\n            </div>\n          ))}\n        </div>\n      ) : (\n        <div>\n          {error ? `Error: ${error}` : 'No repositories found'}\n        </div>\n      )}\n    </div>\n  )\n}\n"}});