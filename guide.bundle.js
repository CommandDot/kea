webpackJsonp([1],{188:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(17),r=(n.n(a),n(302));t.default=n.i(a.createScene)({name:"connected",component:r.a})},189:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(17),r=(n.n(a),n(305));t.default=n.i(a.createScene)({name:"counter-dynamic",component:r.a})},190:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(17),r=(n.n(a),n(306));t.default=n.i(a.createScene)({name:"counter",component:r.a})},191:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(17),r=(n.n(a),n(307));t.default=n.i(a.createScene)({name:"installation",component:r.a})},192:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(17),r=(n.n(a),n(308));t.default=n.i(a.createScene)({name:"sliders",component:r.a})},302:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(912),c=(n.n(l),n(1)),s=n.n(c),i=n(14),u=(n.n(i),n(42)),d=(n.n(u),n(93)),m=n(21),p=n.n(m);n.d(t,"a",function(){return b});var h,f,y=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),g={guideExample1:n(766),guideExample2:n(767),guideExample3:n(768),guideExample4:n(769),guideExample5:n(770)},b=(h=n.i(i.connect)({actions:[d.a,["toggleFeature"]],props:[d.a,["features"]]}),h(f=function(e){function t(){var e,o,l,c;a(this,t);for(var s=arguments.length,i=Array(s),d=0;d<s;d++)i[d]=arguments[d];return o=l=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),l.handleRoute=function(e){var t=l.props.dispatch,a=e.target.attributes.href.value;e.preventDefault(),t(n.i(u.push)(a)),window.scrollTo(0,0)},c=o,r(l,c)}return o(t,e),y(t,[{key:"render",value:function(){var e=this.props.features,t=this.actions.toggleFeature;return s.a.createElement("div",{className:"connected-scene"},s.a.createElement("div",{className:"description"},s.a.createElement("h2",null,"Example #4 - Connected logic"),s.a.createElement("p",null,"Attaching actions, reducers and selectors to your components will get you pretty far."),s.a.createElement("p",null,"However, there comes a time in every application's life when that's no longer enough. Perhaps you need to share code between components? Perhaps you want to separate concerns to make it more readable? Perhaps the logic has grown over 200 lines and really should be yanked out of ",s.a.createElement("code",null,"index.js"),"?"),s.a.createElement("p",null,"Whatever the reason, you're in luck! Kea was originally built just for this. The inline version that we've been using until now (",s.a.createElement("code",null,"@kea({})(Component)"),") came much later."),s.a.createElement("p",null,"So how do you separate your ",s.a.createElement("strong",null,"logic")," from your components?"),s.a.createElement("p",null,"Let's look at a real world example: this guide itself.")),s.a.createElement("div",{className:"description"},s.a.createElement("h2",null,"Separating concerns"),s.a.createElement("p",null,"You might have noticed buttons that look like this:"),s.a.createElement("p",null,s.a.createElement("button",{onClick:function(){return t("connectedGuideHelp")}},"Tell me more!")),e.connectedGuideHelp?s.a.createElement("div",{className:"extra-help"},'"more"!'):null,s.a.createElement("p",null,"How do they work?"),s.a.createElement("p",null,"When I started writing the guide, I just put this code on top of every component:"),s.a.createElement(p.a,{className:"javascript"},g.guideExample1),s.a.createElement("p",null,"The code is rather straightforward, perhaps just a little bit unfamiliar."),s.a.createElement("p",null,"We have an object, ",s.a.createElement("code",null,"features"),", which contains booleans that can be toggled on and off. We return a new object every time the action ",s.a.createElement("code",null,"toggleFeature(feature)")," is called, flipping the boolean for the requested feature."),s.a.createElement("p",null,"While it worked fine, it became repetetive to copy this same code on top of every page in the guide. Code duplication is usually a ",s.a.createElement("button",{onClick:function(){return t("connectedCodeSmell")}},"code smell")," and should be handled approriately."),e.connectedCodeSmell?s.a.createElement("div",{className:"extra-help"},s.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Code_smell"},"Wikipedia"),": ",s.a.createElement("em",null,s.a.createElement("strong",null,"Code smell,"),' also known as bad smell, in computer programming code, refers to any symptom in the source code of a program that possibly indicates a deeper problem. According to Martin Fowler, "a code smell is a surface indication that usually corresponds to a deeper problem in the system". Another way to look at smells is with respect to principles and quality: ',s.a.createElement("strong",null,'"smells are certain structures in the code that indicate violation of fundamental design principles and negatively impact design quality"'),". Code smells are usually not bugsâ€”they are not technically incorrect and do not currently prevent the program from functioning. Instead, they indicate weaknesses in design that may be slowing down development or increasing the risk of bugs or failures in the future. Bad code smells can be an indicator of factors that contribute to technical debt."),s.a.createElement("br",null),s.a.createElement("br",null),"Yeah, yeah... I just wanted to use another hint box!"):null,s.a.createElement("p",null,"So how do we stop this madness?"),s.a.createElement("p",null,"First we must extract the logic to a separate file. Let's call it ",s.a.createElement("code",null,"features-logic.js"),":"),s.a.createElement(p.a,{className:"javascript"},g.guideExample2),s.a.createElement("p",null,"You skip the ",s.a.createElement("code",null,"@")," in front of ",s.a.createElement("code",null,"@kea"),", but everything else remains the same."),s.a.createElement("p",null,"Then we have a few ways to import it."),s.a.createElement("p",null,"The simplest is to do a drop-in replacement:"),s.a.createElement(p.a,{className:"javascript"},g.guideExample3),s.a.createElement("p",null,"That's simple and works fine, but will only get you so far. There are a few things wrong with this approach:"),s.a.createElement("p",null,"First, it's not clear what you're importing. As ",s.a.createElement("a",{href:"https://mariusandra.com/blog/2012/09/two-strategies-for-writing-better-code/"},"code is read far more times than it's written"),", it's very very useful to be as explicit as possible. Your future self will thank you immensely! In this case you have no idea what extra props and actions your component will receive without having to open ",s.a.createElement("code",null,"features-logic.js")," and checking it out yourself."),s.a.createElement("p",null,"You also don't know what baggage you're getting. There might be hundreds of new actions and props, which your relatively simple component will receive. That will slow down the page, as a change in each of them will trigger re-rendering."),s.a.createElement("p",null,"What if one of the props changes? For example the new intern replaces the action ",s.a.createElement("code",null,"toggleFeature")," with two new actions: ",s.a.createElement("code",null,"setFeature")," and ",s.a.createElement("code",null,"clearFeature"),". Without (manually or automatically) clicking the buttons, you won't know that the action is no longer there. Bummer."),s.a.createElement("p",null,"What's more, you can't chain calls like this and you can't add other actions that only this component will use."),s.a.createElement("p",null,"So what's the solution? Answer: the ",s.a.createElement("code",null,"@connect({ ... })")," helper!"),s.a.createElement(p.a,{className:"javascript"},g.guideExample4),s.a.createElement("p",null,"While the syntax may look alien at first, it's very comfortable to use and optimised for readability."),s.a.createElement("p",null,"With ",s.a.createElement("code",null,"connect")," you may import as many props and actions from as many logic stores as you like. In case you make a typo (",s.a.createElement("code",null,"highlghtTheme")," instead of ",s.a.createElement("code",null,"highlightTheme"),"), you will get an error in the JS console and can fix it immediately. Just connect your logic and use it!"),s.a.createElement("p",null,"What if you also want to add actions and reducers only this component will use?"),s.a.createElement("p",null,"No problem! Just replace ",s.a.createElement("code",null,"@connect")," with ",s.a.createElement("code",null,"@kea({ connect: {}, /* other stuff */ })")," like so:"),s.a.createElement(p.a,{className:"javascript"},g.guideExample5),s.a.createElement("p",null,"If this is not redux-heaven, I don't know what is!"),s.a.createElement("h2",null,"Next steps"),s.a.createElement("p",null,"That's it for the guide!"),s.a.createElement("p",null,"Check out the ",s.a.createElement("a",{href:"/examples/todos",onClick:this.handleRoute},"example applications")," or read the ",s.a.createElement("a",{href:"/api/logic",onClick:this.handleRoute},"API docs"),".")))}}]),t}(c.Component))||f)},304:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n(913),s=(n.n(c),n(1)),i=n.n(s),u=n(32),d=n.n(u),m=n(14);n.n(m);n.d(t,"a",function(){return y});var p,h,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),y=(p=n.i(m.kea)({key:function(e){return e.id},path:function(e){return["scenes","counterDynamic","counter",e]},actions:function(){return{increment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{amount:e}},decrement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{amount:e}}}},reducers:function(e){var t,n=e.actions,a=e.key;e.props;return{counter:[0,d.a.number,(t={},l(t,n.increment,function(e,t){return t.key===a?e+t.amount:e}),l(t,n.decrement,function(e,t){return t.key===a?e-t.amount:e}),t)]}},selectors:function(e){var t=e.selectors;return{doubleCounter:[function(){return[t.counter]},function(e){return 2*e},d.a.number]}}}),p(h=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.counter,n=e.doubleCounter,a=this.actions,r=a.increment,o=a.decrement;return i.a.createElement("div",{className:"kea-counter"},"Count: ",t,i.a.createElement("br",null),"Doublecount: ",n,i.a.createElement("br",null),i.a.createElement("button",{onClick:function(){return r(1)}},"Increment"),i.a.createElement("button",{onClick:function(){return o(1)}},"Decrement"))}}]),t}(s.Component))||h)},305:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(914),c=(n.n(l),n(1)),s=n.n(c),i=n(14),u=(n.n(i),n(42)),d=(n.n(u),n(21)),m=n.n(d),p=n(304);n.d(t,"a",function(){return b});var h,f,y=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),g={full:n(772),keyPath:n(773),reducers:n(774)},b=(h=n.i(i.kea)({}),h(f=function(e){function t(){var e,o,l,c;a(this,t);for(var s=arguments.length,i=Array(s),d=0;d<s;d++)i[d]=arguments[d];return o=l=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),l.handleRoute=function(e){var t=l.props.dispatch,a=e.target.attributes.href.value;e.preventDefault(),t(n.i(u.push)(a)),window.scrollTo(0,0)},c=o,r(l,c)}return o(t,e),y(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"counter-dynamic-scene"},s.a.createElement("div",{className:"description"},s.a.createElement("h2",null,"Example #2 - Dynamic Counter"),"This example demonstrates dynamically created actions and reducers.",s.a.createElement("br",null),s.a.createElement("br",null),"As we saw in the ",s.a.createElement("a",{href:"/guide/counter",onClick:this.handleRoute},"previous example"),", if you render multiple instances of the same connected component, they will share the state.",s.a.createElement("br",null),s.a.createElement("br",null),"The guide below shows how to create multiple instances of one component with separate states:",s.a.createElement("div",{className:"demo"},s.a.createElement(p.a,{id:1}),s.a.createElement("br",null),s.a.createElement(p.a,{id:2})),s.a.createElement("h2",null,"1. Key and path"),"The code for this example is almost the same as for the ",s.a.createElement("a",{href:"/guide/counter",onClick:this.handleRoute},"previous counter"),".",s.a.createElement("br",null),s.a.createElement("br",null),"The big difference is that we must manually tell our component instances where to store their data:",s.a.createElement(m.a,{className:"javascript"},g.keyPath),"The ",s.a.createElement("code",null,"key")," function receives your component instance's ",s.a.createElement("code",null,"props")," as input and must return a key that's unique for the life of the component. Usually it's something like ",s.a.createElement("nobr",null,s.a.createElement("code",null,"key = (props) => props.id"))," if your component is rendered as ",s.a.createElement("nobr",null,s.a.createElement("code",null,"<Component id='somethingUnique' />")),s.a.createElement("br",null),s.a.createElement("br",null),"The ",s.a.createElement("em",null,"optional")," ",s.a.createElement("code",null,"path")," function specifies where the data for your component will live in Redux. It takes just one argument, the ",s.a.createElement("code",null,"key")," from the previous step.",s.a.createElement("br",null),s.a.createElement("br",null),"Note! You may also use ",s.a.createElement("code",null,"path")," with non-dynamic components (like the ",s.a.createElement("a",{href:"/guide/counter",onClick:this.handleRoute},"previous example"),") if you wish to specify where they will store their data.",s.a.createElement("br",null),s.a.createElement("br",null),"It makes your redux tree more readable and helps with debugging. In that case you have to skip the ",s.a.createElement("code",null,"key")," line.",s.a.createElement("h2",null,"2. Limiting the reducers"),"There's one last thing you need to do.",s.a.createElement("br",null),s.a.createElement("br",null),"While the reducers are unique for each component instance, the actions are shared.",s.a.createElement("br",null),s.a.createElement("br",null),"No matter which instance of your component triggers the action, all the reducers will receive it. So if counter #1 dispatches the ",s.a.createElement("code",null,"increment")," action, counter #2 will also receive it.",s.a.createElement("br",null),s.a.createElement("br",null),"In order to prevent this, you must check for the key in your reducers, like so:",s.a.createElement(m.a,{className:"javascript"},g.reducers),"This way you can choose if your actions are processed by each instance of the component or by all instances simultaneously."),s.a.createElement("div",{className:"description"},s.a.createElement("h2",null,"Final Example"),"While the following counters have separate data, they are still connected to the counters on top of this page, as they share the same ",s.a.createElement("code",null,"id"),"s. You can mix and match!",s.a.createElement("div",{className:"demo"},s.a.createElement(p.a,{id:1}),s.a.createElement("br",null),s.a.createElement(p.a,{id:2})),"Next, check out the ",s.a.createElement("a",{href:"/guide/sliders",onClick:this.handleRoute},"sliders")," demo to see how to add side effects to your code.",s.a.createElement("h2",null,"Full source"),s.a.createElement(m.a,{className:"javascript"},g.full),s.a.createElement("a",{href:"/guide/sliders",onClick:this.handleRoute},"Next demo")))}}]),t}(c.Component))||f)},306:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(916),c=(n.n(l),n(1)),s=n.n(c),i=n(14),u=(n.n(i),n(42)),d=(n.n(u),n(21)),m=n.n(d),p=n(196),h=n(93);n.d(t,"a",function(){return E});var f,y,g=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),b={full:n(780),import:n(781),actions:n(778),actions2:n(775),actions3:n(776),actionsInject:n(777),reducers:n(783),selectors:n(240),selectors2:n(784),noDecorators:n(782),todoReducer:n(785),component:n(779)},E=(f=n.i(i.connect)({actions:[h.a,["toggleFeature"]],props:[h.a,["features"]]}),f(y=function(e){function t(){var e,o,l,c;a(this,t);for(var s=arguments.length,i=Array(s),d=0;d<s;d++)i[d]=arguments[d];return o=l=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),l.handleRoute=function(e){var t=l.props.dispatch,a=e.target.attributes.href.value;e.preventDefault(),t(n.i(u.push)(a)),window.scrollTo(0,0)},c=o,r(l,c)}return o(t,e),g(t,[{key:"render",value:function(){var e=this.props.features,t=this.actions.toggleFeature;return s.a.createElement("div",{className:"counter-singleton-scene"},s.a.createElement("div",{className:"description"},s.a.createElement("h2",null,"Example #1 - Counter"),"Let's start with the most basic of all examples: creating a counter that we can increment and decrement with the push of a button!",s.a.createElement("br",null),s.a.createElement("br",null),"The final result should look something like this:",s.a.createElement("div",{className:"demo"},s.a.createElement(p.a,null)),"Click the buttons to make sure it works! And then let's begin!"),s.a.createElement("div",{className:"description"},s.a.createElement("h2",null,"1. Connecting @kea"),"Everything starts with importing ",s.a.createElement("code",null,"{ kea }")," into your application:",s.a.createElement(m.a,{className:"javascript"},b.import),"... and connecting it to your React component:",s.a.createElement(m.a,{className:"javascript"},b.component),s.a.createElement("button",{onClick:function(){return t("decorators")}},"What is this @kea({})?"),e.decorators?s.a.createElement("div",{className:"extra-help"},"The ",s.a.createElement("code",null,"@kea({})")," syntax is made possible by an experimental ESnext feature called ",s.a.createElement("strong",null,"decorators"),". You need to add the babel plugin ",s.a.createElement("a",{href:"https://github.com/loganfsmyth/babel-plugin-transform-decorators-legacy"},"babel-plugin-transform-decorators-legacy")," for them to work.",s.a.createElement("br",null),s.a.createElement("br",null),"In case decorators are not your cup of tea, you may just write your code like so:",s.a.createElement(m.a,{className:"javascript"},b.noDecorators),"... and it will work just fine. For the rest of this guide we will assume you have decorators enabled."):null),s.a.createElement("div",{className:"description"},s.a.createElement("h2",null,"2. Actions, reducers, selectors, oh my!"),"Kea is built as a wrapper ",s.a.createElement("strong",null,"on top of")," ",s.a.createElement("a",{href:"http://redux.js.org/"},"redux"),", ",s.a.createElement("a",{href:"https://github.com/reactjs/reselect"},"reselect")," and ",s.a.createElement("a",{href:"https://redux-saga.js.org/"},"redux-saga"),".",s.a.createElement("br",null),s.a.createElement("br",null),"We strongly recommend you understand the ",s.a.createElement("a",{href:"http://redux.js.org/"},"basics of Redux")," before continuing, as kea liberally borrows concepts from it.",s.a.createElement("h3",null,"2.1. Actions"),"The first thing we do is define our actions:",s.a.createElement(m.a,{className:"javascript"},b.actions),"An action in kea is simply a function that takes some arguments and returns a payload. In this case the functions take one argument (amount - the amount to increment with) and return an object with it as the only key/value.",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("button",{onClick:function(){return t("actionDetails")}},"What is happening in the background?"),e.actionDetails?s.a.createElement("div",{className:"extra-help"},"We're using the ES6 double arrow shorthand for creating functions. What we're actually doing is this:",s.a.createElement(m.a,{className:"javascript"},b.actions2),"Also note the line:",s.a.createElement(m.a,{className:"javascript"},b.actionsInject),"... inside the ",s.a.createElement("code",null,"render()")," function.",s.a.createElement("br",null),s.a.createElement("br",null),"When wrapping kea onto your React component, we also inject a new object, ",s.a.createElement("code",null,"this.actions"),", which automatically binds these action creators to redux's ",s.a.createElement("code",null,"dispatch()")," and generates a unique ",s.a.createElement("code",null,"type")," for them.",s.a.createElement("br",null),s.a.createElement("br",null),"Calling ",s.a.createElement("code",null,"this.actions.increment(1)")," in your React component is the same as doing:",s.a.createElement(m.a,{className:"javascript"},b.actions3)):null,s.a.createElement("h3",null,"2.2. Reducers"),"Now that we can dispatch actions, we need to define reducers. This is where your data lives.",s.a.createElement("br",null),s.a.createElement("br",null),"Reducers have an initial ",s.a.createElement("code",null,"state")," and define actions which change this state. They may also include an optional ",s.a.createElement("code",null,"propType"),".",s.a.createElement("br",null),s.a.createElement("br",null),"The latest state of all of the reducers will be passed to your component as props.",s.a.createElement("br",null),s.a.createElement("br",null),"Here's an example:",s.a.createElement(m.a,{className:"javascript"},b.reducers),"The most important thing to remember about reducers is that they must consist of ",s.a.createElement("a",{href:"http://www.nicoespeon.com/en/2015/01/pure-functions-javascript/"},"pure functions"),".",s.a.createElement("br",null),s.a.createElement("br",null),"This means that your reducer must:",s.a.createElement("br",null),s.a.createElement("ol",null,s.a.createElement("li",null,"always return the same output for the same input"),s.a.createElement("li",null,"never change the input! (e.g. when adding something to an array, create and return a new array)"),s.a.createElement("li",null,"never have any other side effects, such as network requests (we'll get to them later in this guide)")),"If you understand how reducers work ",s.a.createElement("a",{href:"http://redux.js.org/docs/basics/Reducers.html"},"in redux"),", you should feel right at home here.",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("button",{onClick:function(){return t("reducerDetails")}},"Tell me more!"),e.reducerDetails?s.a.createElement("div",{className:"extra-help"},"To see more complex reducers in action, look at ",s.a.createElement("a",{href:"https://github.com/keajs/kea-example/blob/master/app/scenes/examples/todos/logic.js"},"the code for the todos example")," (copied below).",s.a.createElement("br",null),s.a.createElement("br",null),"We store all the todos in one object, and whenever we need to update anything for any todo, we return a completely new object.",s.a.createElement("br",null),s.a.createElement("br",null),"We use ES6 ",s.a.createElement("a",{href:"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment"},"destructuring")," and ",s.a.createElement("a",{href:"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_operator"},"object spread")," features extensively.",s.a.createElement(m.a,{className:"javascript"},b.todoReducer)):null,s.a.createElement("h3",null,"2.3. Selectors"),"The final piece of the puzzle is ",s.a.createElement("code",null,"selectors"),".",s.a.createElement("br",null),s.a.createElement("br",null),"Selectors (via ",s.a.createElement("a",{href:"https://github.com/reactjs/reselect"},"reselect"),") take as input other selectors and return some output. Selectors are cached and are only updated if their input changes. You should use them to run complex logic that is too costly to run in ",s.a.createElement("code",null,"render()")," every time.",s.a.createElement("br",null),s.a.createElement("br",null),"Adding selectors gives us this final piece of code:",s.a.createElement(m.a,{className:"javascript"},b.selectors),"The selectors are defined like this:",s.a.createElement(m.a,{className:"javascript"},b.selectors2),"Note that kea automatically creates selectors for all the reducers that you have defined, so you can use ",s.a.createElement("code",null,"selectors.reducerName")," immediately as input."),s.a.createElement("div",{className:"description"},s.a.createElement("h2",null,"Final Example"),"Adding all of this together and rendering two  ",s.a.createElement("code",null,"<Counter />"),"s gives us the following result:",s.a.createElement("div",{className:"demo"},s.a.createElement(p.a,null),s.a.createElement("br",null),s.a.createElement(p.a,null)),"You might notice that something odd is happening: Incrementing one counter automatically increments the other. Is there something we can do about this?",s.a.createElement("br",null),s.a.createElement("br",null),"Yes. That's what the next example is all about: ",s.a.createElement("a",{href:"/guide/counter-dynamic",onClick:this.handleRoute},"Dynamic counters"),s.a.createElement("h2",null,"Full source"),s.a.createElement(m.a,{className:"javascript"},b.full),"Next page: ",s.a.createElement("a",{href:"/guide/counter-dynamic",onClick:this.handleRoute},"Dynamic counters")))}}]),t}(c.Component))||y)},307:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(1),c=n.n(l),s=n(42),i=(n.n(s),n(14)),u=(n.n(i),n(21)),d=n.n(u),m=n(93);n.d(t,"a",function(){return g});var p,h,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),y={package:n(787),store:n(788),cli:n(786)},g=(p=n.i(i.connect)({actions:[m.a,["toggleFeature"]],props:[m.a,["features"]]}),p(h=function(e){function t(){var e,o,l,c;a(this,t);for(var i=arguments.length,u=Array(i),d=0;d<i;d++)u[d]=arguments[d];return o=l=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),l.handleRoute=function(e){var t=l.props.dispatch,a=e.target.attributes.href.value;e.preventDefault(),t(n.i(s.push)(a)),window.scrollTo(0,0)},c=o,r(l,c)}return o(t,e),f(t,[{key:"render",value:function(){this.props.features,this.actions.toggleFeature;return c.a.createElement("div",{className:"counter-singleton-scene"},c.a.createElement("div",{className:"description"},c.a.createElement("h2",null,"Installation"),"Installing ",c.a.createElement("code",null,"kea")," is rather straightforward. You need to add the ",c.a.createElement("code",null,"kea")," package, hook it up to your reducers and run the saga.",c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("h3",null,"1. Adding to an existing app that already uses ",c.a.createElement("code",null,"redux")," and ",c.a.createElement("code",null,"redux-saga")),"First install the packages:",c.a.createElement(d.a,{className:"bash"},y.package),"Then configure the store:",c.a.createElement(d.a,{className:"javascript"},y.store),c.a.createElement("h3",null,"2. Adding to apps made with create-redux-app"),"TODO. PRs welcome!",c.a.createElement("h3",null,"3. Starting a new kea app from scratch"),c.a.createElement(d.a,{className:"bash"},y.cli),c.a.createElement("h2",null,"Continue with the guide"),"Next page: ",c.a.createElement("a",{href:"/guide/counter",onClick:this.handleRoute},"Counter")))}}]),t}(l.Component))||h)},308:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(917),c=(n.n(l),n(1)),s=n.n(c),i=n(14),u=(n.n(i),n(42)),d=(n.n(u),n(197)),m=n(309),p=n(310),h=n(21),f=n.n(h),y=n(93);n.d(t,"a",function(){return v});var g,b,E=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),w={full:n(791),static:n(796),addSagaImports:n(789),addSagaStart:n(790),saga1Before:n(794),saga1After:n(793),saga2Effects:n(795)
},v=(g=n.i(i.connect)({actions:[y.a,["toggleFeature"]],props:[y.a,["features"]]}),g(b=function(e){function t(){var e,o,l,c;a(this,t);for(var s=arguments.length,i=Array(s),d=0;d<s;d++)i[d]=arguments[d];return o=l=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),l.handleRoute=function(e){var t=l.props.dispatch,a=e.target.attributes.href.value;e.preventDefault(),t(n.i(u.push)(a)),window.scrollTo(0,0)},c=o,r(l,c)}return o(t,e),E(t,[{key:"render",value:function(){var e=this.props.features,t=this.actions.toggleFeature;return s.a.createElement("div",{className:"sliders-scene"},s.a.createElement("div",{className:"description"},s.a.createElement("h2",null,"Example #3 - Sliders"),"This example demonstrates side effects through sagas.",s.a.createElement("br",null),s.a.createElement("br",null),"We will build a slider that will update its image every 5 seconds.",s.a.createElement("h2",null,"Final result"),"The final result will look like this:",s.a.createElement("div",{className:"demo"},s.a.createElement("div",{className:"slider-container"},s.a.createElement(d.a,{id:1,initialSlide:0}))),"Whenever you press any of the dots the 5 second counter will reset.",s.a.createElement("h2",null,"1. The static component"),"Based on the knowledge from the previous chapters, you should be able to build a static slider.",s.a.createElement("br",null),s.a.createElement("br",null),"The code for it will look something like this:",s.a.createElement(f.a,{className:"javascript"},w.static),"Giving us the following result:",s.a.createElement("div",{className:"demo"},s.a.createElement("div",{className:"slider-container"},s.a.createElement(m.a,null))),"Click it! It works, but won't change the slides automatically.",s.a.createElement("h2",null,"2. Just Add Sagas"),"For that we need to write some ",s.a.createElement("a",{href:"https://redux-saga.js.org/"},"sagas"),".",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("a",{href:"https://redux-saga.js.org/"},"Sagas")," provide a nice way to write code that has side effects. They might be unfamiliar at first, but when you get to know them, you'll wonder how you ever wrote your frontend code without them.",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("button",{onClick:function(){return t("sagas")}},"I need to brush up on my Sagas"),s.a.createElement("br",null),e.sagas?s.a.createElement("div",{className:"extra-help"},"Here is a quick refresher on sagas. Please read ",s.a.createElement("a",{href:"https://redux-saga.js.org/"},"the redux-saga documentation")," for more details.",s.a.createElement("br",null),s.a.createElement("br",null),"The cool thing with sagas is that they let you write async code in a sequential manner.",s.a.createElement("br",null),s.a.createElement("br",null),"When before you would write:",s.a.createElement(f.a,{className:"javascript"},w.saga1Before),"With sagas you can write the same code like this:",s.a.createElement(f.a,{className:"javascript"},w.saga1After),"This is a simple example, but you can probably see how the magical ",s.a.createElement("code",null,"yield")," keyword will make your life so much easier.",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("button",{onClick:function(){return t("sagasGenerators")}},"What the ...?"),s.a.createElement("br",null),e.sagasGenerators?s.a.createElement("div",{className:"extra-help"},"Notice the ",s.a.createElement("code",null,"*")," between ",s.a.createElement("code",null,"function * doSomething()")," and the ",s.a.createElement("code",null,"yield")," before ",s.a.createElement("code",null,"yield api.fetchUsers()"),".",s.a.createElement("br",null),s.a.createElement("br",null),"The ",s.a.createElement("code",null,"*")," indicates that youre creating a ",s.a.createElement("a",{href:"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Statements/function*"},s.a.createElement("em",null,"generator function")),". From MDN: ",s.a.createElement("em",null,"Generators are functions which can be exited and later re-entered. Their context (variable bindings) will be saved across re-entrances."),s.a.createElement("br",null),s.a.createElement("br",null),"It's a bit like using the new ES ",s.a.createElement("code",null,"async")," and ",s.a.createElement("code",null,"await")," features."):null,s.a.createElement("br",null),"In addition to simplifying promise-based callbacks, redux-saga provides a lot of helpers which make working with redux actions very simple.",s.a.createElement("br",null),s.a.createElement("br",null),"Here are a few of the special effects you can use to control your sagas:",s.a.createElement(f.a,{className:"javascript"},w.saga2Effects),"For this example it's important that you understand how the ",s.a.createElement("code",null,"put"),", ",s.a.createElement("code",null,"take")," and ",s.a.createElement("code",null,"race")," effects work.",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("a",{href:"https://redux-saga.js.org/docs/advanced/Concurrency.html"},s.a.createElement("code",null,"takeEvery"))," and ",s.a.createElement("a",{href:"https://redux-saga.js.org/docs/advanced/Concurrency.html"},s.a.createElement("code",null,"takeLatest"))," are very useful as well!"):null,s.a.createElement("br",null),"First we must import the ",s.a.createElement("code",null,"redux-saga/effects")," that we need. We'll also import a ",s.a.createElement("code",null,"delay")," effect that just sleeps for the given amount of milliseconds.",s.a.createElement(f.a,{className:"javascript"},w.addSagaImports),"And then we create a ",s.a.createElement("code",null,"start")," generator function inside ",s.a.createElement("code",null,"@kea({})"),". This function is called every time your component is mounted.",s.a.createElement("br",null),s.a.createElement("br",null),"Inside this ",s.a.createElement("code",null,"start")," function we create a ",s.a.createElement("code",null,"race")," condition between two competing effects: a delay of 5 seconds and the action ",s.a.createElement("code",null,"updateSlide")," being triggered.",s.a.createElement("br",null),s.a.createElement("br",null),"The code pauses at the ",s.a.createElement("code",null,"yield race()")," call until one of the two conditions is met.",s.a.createElement("br",null),s.a.createElement("br",null),"In case the timeout won the race, we fetch the latest slide (",s.a.createElement("code",null,"yield this.get(..)")," is a shorthand to use the selectors defined in ",s.a.createElement("code",null,"@kea({})"),")... and then we dispatch (",s.a.createElement("code",null,"yield put()"),") the ",s.a.createElement("code",null,"updateSlide")," action with the next slide.",s.a.createElement(f.a,{className:"javascript"},w.addSagaStart),"All of this results in this:",s.a.createElement("div",{className:"demo"},s.a.createElement("div",{className:"slider-container"},s.a.createElement(p.a,null))),"Now if you will always just have one slider on your screen, you're done. If you wish to have many slider instances, you will run into the same issue as with the dynamic counter example - both sliders will listen to and react to the ",s.a.createElement("code",null,"updateSlide")," actions unless you explicitly prohibit them.",s.a.createElement("br",null),s.a.createElement("br",null),"The code below demonstrates a way to prevent this from happening. It also shows how to listen to actions using the ",s.a.createElement("code",null,"takeEvery")," helper and the ",s.a.createElement("code",null,"workers")," object."),s.a.createElement("div",{className:"code"},s.a.createElement("h2",null,"Full source"),"Better documentation is coming soon. Until then, read the comments in the code and the ",s.a.createElement("a",{href:"https://redux-saga.js.org/"},"redux-saga")," documentation.",s.a.createElement(f.a,{className:"javascript"},w.full),"Next page: ",s.a.createElement("a",{href:"/guide/connected",onClick:this.handleRoute},"Connected logic")))}}]),t}(c.Component))||b)},309:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n(180),s=(n.n(c),n(1)),i=n.n(s),u=n(32),d=n.n(u),m=n(14),p=(n.n(m),n(121)),h=n(119);n.d(t,"a",function(){return b});var f,y,g=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),b=(f=n.i(m.kea)({actions:function(){return{updateSlide:function(e){return{index:e}}}},reducers:function(e){var t=e.actions;return{currentSlide:[0,d.a.number,l({},t.updateSlide,function(e,t){return t.index%h.a.length})]}},selectors:function(e){var t=e.selectors;return{currentImage:[function(){return[t.currentSlide]},function(e){return h.a[e]},d.a.object]}}}),f(y=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),g(t,[{key:"render",value:function(){var e=this.props,t=e.currentSlide,a=e.currentImage,r=this.actions.updateSlide,o="Image copyright by "+a.author;return i.a.createElement("div",{className:"kea-slider"},i.a.createElement("img",{src:a.src,alt:o,title:o}),i.a.createElement("div",{className:"buttons"},n.i(p.a)(h.a.length).map(function(e){return i.a.createElement("span",{key:e,className:e===t?"selected":"",onClick:function(){return r(e)}})})))}}]),t}(s.Component))||y)},310:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n(180),s=(n.n(c),n(1)),i=n.n(s),u=n(32),d=n.n(u),m=n(14),p=(n.n(m),n(49)),h=n(121),f=n(120),y=n(119);n.d(t,"a",function(){return w});var g,b,E=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),w=(g=n.i(m.kea)({actions:function(){return{updateSlide:function(e){return{index:e}}}},reducers:function(e){var t=e.actions;return{currentSlide:[0,d.a.number,l({},t.updateSlide,function(e,t){return t.index%y.a.length})]}},selectors:function(e){var t=e.selectors;return{currentImage:[function(){return[t.currentSlide]},function(e){return y.a[e]},d.a.object]}},start:regeneratorRuntime.mark(function e(){var t,a,r,o,l=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.actions.updateSlide,console.log("Starting homepage slider saga"),console.log(this,this.actions,this.props);case 3:return e.next=6,n.i(p.race)({change:n.i(p.take)(function(e){return e.type===t.toString()&&e.payload.key===l.key}),timeout:n.i(f.a)(5e3)});case 6:if(a=e.sent,r=a.timeout,!r){e.next=14;break}return e.next=11,this.get("currentSlide");case 11:return o=e.sent,e.next=14,n.i(p.put)(t(o+1));case 14:e.next=3;break;case 16:case"end":return e.stop()}},e,this)})}),g(b=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),E(t,[{key:"render",value:function(){var e=this.props,t=e.currentSlide,a=e.currentImage,r=this.actions.updateSlide,o="Image copyright by "+a.author;return i.a.createElement("div",{className:"kea-slider"},i.a.createElement("img",{src:a.src,alt:o,title:o}),i.a.createElement("div",{className:"buttons"},n.i(h.a)(y.a.length).map(function(e){return i.a.createElement("span",{key:e,className:e===t?"selected":"",onClick:function(){return r(e)}})})))}}]),t}(s.Component))||b)},516:function(e,t,n){t=e.exports=n(27)(),t.push([e.i,"",""])},517:function(e,t,n){t=e.exports=n(27)(),t.push([e.i,"",""])},518:function(e,t,n){t=e.exports=n(27)(),t.push([e.i,".counter-dynamic-scene {\n  // text-align: center;\n}\n",""])},520:function(e,t,n){t=e.exports=n(27)(),t.push([e.i,".counter-singleton-scene {\n  // text-align: center;\n}\n",""])},522:function(e,t,n){t=e.exports=n(27)(),t.push([e.i,".sliders-scene {\n  text-align: center;\n}\n.sliders-scene .slider-container {\n  max-width: 500px;\n  margin: 0 auto;\n}\n",""])},766:function(e,t){e.exports="// index.js\nimport React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { kea } from 'kea'\n\n@kea({\n  actions: () => ({\n    toggleFeature: (feature) => ({ feature })\n  }),\n  reducers: ({ actions }) => ({\n    features: [{}, PropTypes.object, {\n      [actions.toggleFeature]: (state, payload) => {\n        const { feature } = payload\n        return {\n          ...state,\n          [feature]: !state[feature]\n        }\n      }\n    }]\n  })\n})\nexport default class CounterExampleScene extends Component {\n  // ...\n\n  render () {\n    const { features } = this.props\n    const { toggleFeature } = this.actions\n\n    return (\n      <div>\n        <button onClick={() => toggleFeature('reducerDetails')}>{'Tell me more!'}</button>\n\n        {features.reducerDetails ? (\n          <div className='extra-help'>\n            extra help comes here\n          </div>\n        ) : null}\n      </div>\n    )\n  }\n}\n"},767:function(e,t){e.exports="// features-logic.js\nimport PropTypes from 'prop-types'\nimport { kea } from 'kea'\n\nexport default kea({\n  actions: () => ({\n    toggleFeature: (feature) => ({ feature })\n  }),\n  reducers: ({ actions }) => ({\n    features: [{}, PropTypes.object, {\n      [actions.toggleFeature]: (state, payload) => {\n        const { feature } = payload\n        return {\n          ...state,\n          [feature]: !state[feature]\n        }\n      }\n    }]\n  })\n})\n"},768:function(e,t){e.exports="// index.js\nimport React, { Component } from 'react'\n\nimport featuresLogic from '../features-logic'\n\n@featuresLogic\nexport default class CounterExampleScene extends Component {\n  // no change here\n}\n"},769:function(e,t){e.exports="import React, { Component } from 'react'\nimport { connect } from 'kea'\n\nimport featuresLogic from '../features-logic'\nimport someOtherLogic from '../some-other-logic'\n\n@connect({\n  actions: [\n    featuresLogic, [\n      'toggleFeature'\n    ]\n  ],\n  props: [\n    featuresLogic, [\n      'features'\n    ],\n    someOtherLogic, [\n      'isMenuOpen',\n      'isPageLoading',\n      'highlightTheme'\n    ]\n  ]\n})\nexport default class CounterExampleScene extends Component {\n  // as we were...\n  render () {\n    const { features, isMenuOpen, isPageLoading, highlightTheme } = this.props\n    const { toggleFeature } = this.actions\n    // ...\n  }\n}\n"},770:function(e,t){e.exports="import React, { Component } from 'react'\nimport { connect } from 'kea'\n\nimport featuresLogic from '../features-logic'\n\n@kea({\n  connect: {\n    actions: [\n      featuresLogic, [\n        'toggleFeature'\n      ]\n    ],\n    props: [\n      featuresLogic, [\n        'features'\n      ]\n    ]\n  },\n  actions: {\n    doSomething: (id) => ({ id })\n  },\n  // ...\n})\nexport default class CounterExampleScene extends Component {\n  // no change here\n}\n"},772:function(e,t){e.exports="// counter/index.js\nimport React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { kea } from 'kea'\n\n@kea({\n  key: (props) => props.id,\n  path: (key) => ['scenes', 'counterDynamic', 'counter', key],\n\n  actions: () => ({\n    increment: (amount) => ({ amount }),\n    decrement: (amount) => ({ amount })\n  }),\n\n  reducers: ({ actions, key, props }) => ({\n    counter: [0, PropTypes.number, {\n      [actions.increment]: (state, payload) => payload.key === key ? state + payload.amount : state,\n      [actions.decrement]: (state, payload) => payload.key === key ? state - payload.amount : state\n    }]\n  }),\n\n  selectors: ({ selectors }) => ({\n    doubleCounter: [\n      () => [selectors.counter],\n      (counter) => counter * 2,\n      PropTypes.number\n    ]\n  })\n})\nexport default class Counter extends Component {\n  render () {\n    const { counter, doubleCounter } = this.props\n    const { increment, decrement } = this.actions\n\n    return (\n      <div className='kea-counter'>\n        Count: {counter}\n        <br />\n        Doublecount: {doubleCounter}\n        <br />\n        <button onClick={() => increment(1)}>Increment</button>\n        <button onClick={() => decrement(1)}>Decrement</button>\n      </div>\n    )\n  }\n}\n\n// index.js\nexport default class CounterDynamicScene extends Component {\n  render () {\n    return (\n      <div>\n        <Counter id={1} />\n        <Counter id={2} />\n      </div>\n    )\n  }\n}\n"},773:function(e,t){e.exports="import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { kea } from 'kea'\n\n@kea({\n  key: (props) => props.id,\n\n  path: (key) => ['scenes', 'counterDynamic', 'counter', key],\n\n  // ...\n})\nexport default class Counter extends Component {\n  // ...\n}\n"},774:function(e,t){e.exports="@kea({\n  key: (props) => props.id,\n  path: (key) => ['scenes', 'counterDynamic', 'counter', key],\n\n  actions: () => ({\n    increment: (amount = 1) => ({ amount }),\n    decrement: (amount = 1) => ({ amount })\n  }),\n\n  reducers: ({ actions, key, props }) => ({\n    counter: [0, PropTypes.number, {\n      [actions.increment]: (state, payload) => payload.key === key ? state + payload.amount : state,\n      [actions.decrement]: (state, payload) => payload.key === key ? state - payload.amount : state\n    }]\n  }),\n\n  // selectors: ...\n})\n"},775:function(e,t){e.exports="function increment (amount) {\n  return { amount: amount }\n}\n"},776:function(e,t){e.exports="store.dispatch({\n  type: 'increment counter', // autogenerated unique type\n  payload: {\n    amount: 1\n  }\n})\n"},777:function(e,t){e.exports="const { increment, decrement } = this.actions\n"},778:function(e,t){e.exports="// counter/index.js\nimport React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { kea } from 'kea'\n\n@kea({\n  actions: () => ({\n    increment: (amount) => ({ amount }),\n    decrement: (amount) => ({ amount })\n  }),\n  // TODO: add things here\n})\nexport default class Counter extends Component {\n  render () {\n    const { increment, decrement } = this.actions\n\n    // TODO: make these work\n    const counter = 0\n    const counter = 0\n\n    return (\n      <div className='kea-counter'>\n        Count: {counter}\n        <br />\n        Doublecount: {doubleCounter}\n        <br />\n        <button onClick={() => increment(1)}>Increment</button>\n        <button onClick={() => decrement(1)}>Decrement</button>\n      </div>\n    )\n  }\n}\n"},779:function(e,t){e.exports="import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { kea } from 'kea'\n\n@kea({\n  // TODO: code goes here\n})\nexport default class Counter extends Component {\n  render () {\n    // TODO: make these work\n    const counter = 0\n    const doubleCounter = 0\n    const increment = () => {}\n    const decrement = () => {}\n\n    return (\n      <div className='kea-counter'>\n        Count: {counter}\n        <br />\n        Doublecount: {doubleCounter}\n        <br />\n        <button onClick={() => increment(1)}>Increment</button>\n        <button onClick={() => decrement(1)}>Decrement</button>\n      </div>\n    )\n  }\n}\n"},780:function(e,t){e.exports="// counter/index.js\nimport React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { kea } from 'kea'\n\n@kea({\n  actions: () => ({\n    increment: (amount) => ({ amount }),\n    decrement: (amount) => ({ amount })\n  }),\n\n  reducers: ({ actions }) => ({\n    counter: [0, PropTypes.number, {\n      [actions.increment]: (state, payload) => state + payload.amount,\n      [actions.decrement]: (state, payload) => state - payload.amount\n    }]\n  }),\n\n  selectors: ({ selectors }) => ({\n    doubleCounter: [\n      () => [selectors.counter],\n      (counter) => counter * 2,\n      PropTypes.number\n    ]\n  })\n})\nexport default class Counter extends Component {\n  render () {\n    const { counter, doubleCounter } = this.props\n    const { increment, decrement } = this.actions\n\n    return (\n      <div className='kea-counter'>\n        Count: {counter}\n        <br />\n        Doublecount: {doubleCounter}\n        <br />\n        <button onClick={() => increment(1)}>Increment</button>\n        <button onClick={() => decrement(1)}>Decrement</button>\n      </div>\n    )\n  }\n}\n\n// index.js\nexport default class CounterSingletonScene extends Component {\n  render () {\n    return (\n      <div>\n        <Counter />\n        <Counter />\n      </div>\n    )\n  }\n}\n"},781:function(e,t){e.exports="import { kea } from 'kea'\n"},782:function(e,t){e.exports="import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { kea } from 'kea'\n\nconst keaOptions = {\n  // ... code here\n}\n\nclass Counter extends Component {\n  render () {\n    // TODO: make these work\n    const counter = 0\n    const doubleCounter = 0\n    const increment = () => {}\n    const decrement = () => {}\n\n    return (\n      <div className='kea-counter'>\n        Count: {counter}\n        <br />\n        Doublecount: {doubleCounter}\n        <br />\n        <button onClick={() => increment(1)}>Increment</button>\n        <button onClick={() => decrement(1)}>Decrement</button>\n      </div>\n    )\n  }\n}\n\nexport default kea(keaOptions)(Component)\n"},783:function(e,t){e.exports="import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { kea } from 'kea'\n\n@kea({\n  actions: () => ({\n    increment: (amount) => ({ amount }),\n    decrement: (amount) => ({ amount })\n  }),\n\n  reducers: ({ actions }) => ({\n    counter: [0, PropTypes.number, {\n      [actions.increment]: (state, payload) => state + payload.amount,\n      [actions.decrement]: (state, payload) => state - payload.amount\n    }]\n  }),\n\n  // TODO: more code here?\n})\nexport default class Counter extends Component {\n  render () {\n    const { counter } = this.props\n    const { increment, decrement } = this.actions\n\n    // TODO: is there a better way? we need to recompute this every time we render!\n    const doubleCounter = counter * 2\n\n    return (\n      <div className='kea-counter'>\n        Count: {counter}\n        <br />\n        Doublecount: {doubleCounter}\n        <br />\n        <button onClick={() => increment(1)}>Increment</button>\n        <button onClick={() => decrement(1)}>Decrement</button>\n      </div>\n    )\n  }\n}\n"},784:function(e,t){e.exports="selectors: ({ selectors }) => ({\n  // add as many as you want\n  nameOfSelector: [\n    // input selectors\n    () => [selectors.firstOtherSelector, selectors.secondOtherSelector],\n    // calculate the result\n    (firstOther, secondOther) => firstOther + secondOther,\n    // type of the result\n    PropTypes.number\n  ]\n})\n"},785:function(e,t){e.exports="\nactions: ({ constants }) => ({\n  // tab\n  showAll: true,\n  showActive: true,\n  showCompleted: true,\n\n  // todos\n  addTodo: value => ({ value }),\n  removeTodo: id => ({ id }),\n  completeTodo: id => ({ id }),\n  unCompleteTodo: id => ({ id }),\n  renameTodo: (id, value) => ({ id, value }),\n  setEditing: id => ({ id }),\n  updateEditValue: (id, value) => ({ id, value }),\n  clearEditing: id => ({ id }),\n  toggleAll: completed => ({ completed }),\n  clearCompleted: true\n}),\n\nreducers: ({ actions, constants }) => ({\n  visibilityFilter: [constants.SHOW_ALL, PropTypes.string, {\n    [actions.showAll]: () => constants.SHOW_ALL,\n    [actions.showActive]: () => constants.SHOW_ACTIVE,\n    [actions.showCompleted]: () => constants.SHOW_COMPLETED\n  }],\n\n  todos: [{}, PropTypes.object, { persist: true }, {\n    [actions.addTodo]: (state, payload) => {\n      const { value } = payload\n      const id = createUuid()\n\n      return {\n        ...state,\n        [id]: {\n          id,\n          createdAt: new Date().getTime(),\n          value,\n          completed: false,\n          editing: false\n        }\n      }\n    },\n    [actions.removeTodo]: (state, payload) => {\n      const { id } = payload\n      const { [id]: _dispose_, ...rest } = state\n      return rest\n    },\n    [actions.completeTodo]: (state, payload) => {\n      const { id } = payload\n\n      return {\n        ...state,\n        [id]: {\n          ...state[id],\n          completed: true\n        }\n      }\n    },\n    [actions.unCompleteTodo]: (state, payload) => {\n      const { id } = payload\n\n      return {\n        ...state,\n        [id]: {\n          ...state[id],\n          completed: false\n        }\n      }\n    },\n    [actions.renameTodo]: (state, payload) => {\n      const { id, value } = payload\n\n      return {\n        ...state,\n        [id]: {\n          ...state[id],\n          value\n        }\n      }\n    },\n    [actions.toggleAll]: (state, payload) => {\n      const { completed } = payload\n      let newState = {}\n      Object.values(state).forEach(todo => {\n        newState[todo.id] = {...todo, completed}\n      })\n\n      return newState\n    },\n    [actions.clearCompleted]: (state, payload) => {\n      let newState = {}\n      Object.values(state).forEach(todo => {\n        if (!todo.completed) {\n          newState[todo.id] = todo\n        }\n      })\n      return newState\n    },\n    [actions.setEditing]: (state, payload) => {\n      const { id } = payload\n\n      return {\n        ...state,\n        [id]: {\n          ...state[id],\n          editing: true,\n          editValue: state[id].value\n        }\n      }\n    },\n    [actions.updateEditValue]: (state, payload) => {\n      const { id, value } = payload\n\n      return {\n        ...state,\n        [id]: {\n          ...state[id],\n          editValue: value\n        }\n      }\n    },\n    [actions.clearEditing]: (state, payload) => {\n      const { id } = payload\n\n      return {\n        ...state,\n        [id]: {\n          ...state[id],\n          editing: false,\n          editValue: null\n        }\n      }\n    }\n  }]\n}),\n\n"},786:function(e,t){e.exports="npm install -g kea\nkea new my-project\ncd my-project\nyarn       # ... or npm install\nyarn start # ... or npm start\n"},787:function(e,t){e.exports="# if you're using yarn\nyarn add kea\n\n# if you're using npm\nnpm install kea --save\n"},788:function(e,t){e.exports="import { keaReducer, keaSaga } from 'kea' // add this\n\nconst reducers = combineReducers({\n  scenes: keaReducer('scenes'), // add this\n  routing: routerReducer\n  // ... other reducers you might have\n})\n\nconst sagaMiddleware = createSagaMiddleware()\nconst finalCreateStore = compose(\n  applyMiddleware(sagaMiddleware),\n  applyMiddleware(routerMiddleware(browserHistory))\n)(createStore)\n\nconst store = finalCreateStore(reducers)\n\nsagaMiddleware.run(keaSaga) // add this\n"},789:function(e,t){e.exports="import { take, race, put } from 'redux-saga/effects'\nimport delay from '~/utils/delay'\n"},790:function(e,t){e.exports="@kea({\n  actions: () => ({\n    updateSlide: index => ({ index })\n  }),\n\n  // ...\n\n  // run this saga when the component is mounted\n  start: function * () {\n    const { updateSlide } = this.actions\n\n    while (true) {\n      const { timeout } = yield race({\n        change: take(updateSlide.toString()),\n        timeout: delay(5000)\n      })\n\n      if (timeout) {\n        const currentSlide = yield this.get('currentSlide')\n        yield put(updateSlide(currentSlide + 1))\n      }\n    }\n  }\n})\nexport default class StaticSlider extends Component {\n  // as it was\n}\n"},791:function(e,t){e.exports="// slider/index.js\nimport './styles.scss'\n\nimport React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { kea } from 'kea'\n\nimport { take, race, put } from 'redux-saga/effects'\n\nimport delay from '~/utils/delay'\nimport range from '~/utils/range'\n\nimport images from './images'\n\n@kea({\n  key: (props) => props.id,\n\n  path: (key) => ['scenes', 'homepage', 'slider', key],\n\n  actions: () => ({\n    updateSlide: index => ({ index })\n  }),\n\n  reducers: ({ actions, key, props }) => ({\n    currentSlide: [props.initialSlide || 0, PropTypes.number, {\n      [actions.updateSlide]: (state, payload) => {\n        return payload.key === key ? payload.index % images.length : state\n      }\n    }]\n  }),\n\n  selectors: ({ selectors }) => ({\n    currentImage: [\n      () => [selectors.currentSlide],\n      (currentSlide) => images[currentSlide],\n      PropTypes.object\n    ]\n  }),\n\n  // This saga is run when the component is mounted.\n  // The function is a regular redux-saga worker that has access to:\n  // 1) this.actions, 2) this.key and 3) this.props\n  //\n  // Read the redux-saga documentation to understand the different\n  // functions like: race(), put(), take(), etc\n  start: function * () {\n    const { updateSlide } = this.actions\n\n    console.log('Starting homepage slider saga')\n    // console.log(this, this.actions, this.props)\n\n    while (true) {\n      // wait until the updateSlide() action is triggered or a 5sec timeout occurs\n      // to ignore actions from other slider instances we must also match the key\n      const { timeout } = yield race({\n        change: take(action => action.type === updateSlide.toString() &&\n                               action.payload.key === this.key),\n        timeout: delay(5000)\n      })\n\n      if (timeout) {\n        // use this.get(..) to select the latest data from redux\n        const currentSlide = yield this.get('currentSlide')\n\n        // actions are not automatically bound to dispatch, so\n        // you must use redux-saga's put() with them\n        yield put(updateSlide(currentSlide + 1))\n      }\n    }\n  },\n\n  // this saga is run when the component is unmounted\n  stop: function * () {\n    console.log('Stopping homepage slider saga')\n  },\n\n  // The redux-saga takeEvery function.\n  // It waits for actions and runs the relevant functions.\n  // Also available: takeLatest\n  takeEvery: ({ actions, workers }) => ({\n    [actions.updateSlide]: workers.updateSlide\n  }),\n\n  // it's recommended to group all the logic under the workers: {} object.\n  workers: {\n    updateSlide: function * (action) {\n      // check if it was this component that triggered the action\n      if (action.payload.key === this.key) {\n        console.log('slide update triggered', action.payload.key, this.key, this.props.id)\n        // console.log(action, this)\n      }\n    }\n  }\n})\nexport default class Slider extends Component {\n  render () {\n    const { currentSlide, currentImage } = this.props\n    const { updateSlide } = this.actions\n\n    const title = `Image copyright by ${currentImage.author}`\n\n    return (\n      <div className='kea-slider'>\n        <img src={currentImage.src} alt={title} title={title} />\n        <div className='buttons'>\n          {range(images.length).map(i => (\n            <span key={i}\n                  className={i === currentSlide ? 'selected' : ''}\n                  onClick={() => updateSlide(i)} />\n          ))}\n        </div>\n      </div>\n    )\n  }\n}\n\n// index.js\nexport default class SlidersScene extends Component {\n  render () {\n    return (\n      <div className='slider-container'>\n        <Slider id={1} initialSlide={0} />\n        <Slider id={2} initialSlide={1} />\n      </div>\n    )\n  }\n}\n\n";
},793:function(e,t){e.exports="import api from './api'\n\nfunction * doSomething () {\n  // get all visible users\n  const result = yield api.fetchUsers()\n  console.log('api returned', result)\n\n  // get the posts for the first user\n  const posts = yield api.fetchUserPosts(result.users[0].username)\n\n  // do something with the user's posts\n  console.log('got the posts', posts)\n}\n"},794:function(e,t){e.exports="import api from './api'\n\nfunction doSomething () {\n  // get all visible users\n  api.fetchUsers().then(result => {\n    console.log('api returned', result)\n\n    // get the posts for the first user\n    api.fetchUserPosts(result.users[0].username).then(posts => {\n      // do something with the user's posts\n      console.log('got the posts', posts)\n    })\n  })\n}\n"},795:function(e,t){e.exports="import api from './api'\nimport { take, race, put, fork, call } from 'redux-saga/effects'\n\n// redux action creator\nconst loadUsers = (search) => ({ type: 'LOAD_USERS', payload: { search } })\n\n// all saga effects must be run in generator functions\nfunction * saga () {\n\n  // here are some things you can do inside sagas\n\n  // block until an action with the type \"LOAD_USERS\" was dispatched\n  yield take('LOAD_USERS')\n\n  // dispatch the redux action \"loadUsers('something')\"\n  // == { type: 'LOAD_USERS', payload: { search: 'something' } }\n  yield put(loadUsers('something'))\n\n  // block until either the action 'LOAD_USERS' or the action 'LOAD_POSTS' got dispatched\n  const winner = yield race({\n    loadUsers: take('LOAD_USERS'),\n    loadPosts: take('LOAD_POSTS'),\n  })\n\n  // in case the winner was loadUsers:\n  // winner == { loadUsers: /* something */, loadPosts: undefined }\n  console.log(winner)\n\n  // anything that returns a promise (.then(result => {})) can also be accessed like this:\n  const result = yield api.loadUsers()\n\n  // start another saga in the background (will not block)\n  yield fork(waitForUsersAction)\n\n  // start another saga in the foreground (will block until it finishes)\n  yield call(otherWorker)\n}\n\nfunction * otherWorker () {\n  console.log('inside otherworker')\n}\n\nfunction * waitForUsersAction () {\n  while (true) {\n    yield take(LOAD_USERS)\n    const result = yield api.loadUsers()\n    yield put({ type: 'USERS_LOADED', payload: { result } })\n  }\n}\n"},796:function(e,t){e.exports="import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { kea } from 'kea'\n\nimport images from './images'     // array of objects [{ src, author }, ...]\nimport range from '~/utils/range' // helper, range(3) === [0, 1, 2]\n\n@kea({\n  actions: () => ({\n    updateSlide: index => ({ index })\n  }),\n\n  reducers: ({ actions }) => ({\n    currentSlide: [0, PropTypes.number, {\n      [actions.updateSlide]: (state, payload) => payload.index % images.length\n    }]\n  }),\n\n  selectors: ({ selectors }) => ({\n    currentImage: [\n      () => [selectors.currentSlide],\n      (currentSlide) => images[currentSlide],\n      PropTypes.object\n    ]\n  })\n})\nexport default class Slider extends Component {\n  render () {\n    const { currentSlide, currentImage } = this.props\n    const { updateSlide } = this.actions\n\n    const title = `Image copyright by ${currentImage.author}`\n\n    return (\n      <div className='kea-slider'>\n        <img src={currentImage.src} alt={title} title={title} />\n        <div className='buttons'>\n          {range(images.length).map(i => (\n            <span key={i}\n                  className={i === currentSlide ? 'selected' : ''}\n                  onClick={() => updateSlide(i)} />\n          ))}\n        </div>\n      </div>\n    )\n  }\n}\n"},912:function(e,t,n){var a=n(516);"string"==typeof a&&(a=[[e.i,a,""]]);n(28)(a,{});a.locals&&(e.exports=a.locals)},913:function(e,t,n){var a=n(517);"string"==typeof a&&(a=[[e.i,a,""]]);n(28)(a,{});a.locals&&(e.exports=a.locals)},914:function(e,t,n){var a=n(518);"string"==typeof a&&(a=[[e.i,a,""]]);n(28)(a,{});a.locals&&(e.exports=a.locals)},916:function(e,t,n){var a=n(520);"string"==typeof a&&(a=[[e.i,a,""]]);n(28)(a,{});a.locals&&(e.exports=a.locals)},917:function(e,t,n){var a=n(522);"string"==typeof a&&(a=[[e.i,a,""]]);n(28)(a,{});a.locals&&(e.exports=a.locals)},93:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(32),o=n.n(r),l=n(14),c=(n.n(l),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e});t.a=n.i(l.kea)({actions:function(){return{toggleFeature:function(e){return{feature:e}}}},reducers:function(e){var t=e.actions;return{features:[{},o.a.object,a({},t.toggleFeature,function(e,t){var n=t.feature;return c({},e,a({},n,!e[n]))})]}}})},932:function(e,t,n){n(191),n(190),n(189),n(192),e.exports=n(188)}},[932]);