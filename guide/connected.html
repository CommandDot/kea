<html class=" "><head>
    <title>Kea</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="https://kea.js.org/img/logo.svg" type="image/x-icon">
    <meta property="og:image" content="https://kea.js.org/img/logo.png">
    <meta name="twitter:image:src" content="https://kea.js.org/img/logo.png">
    <script>
      if (window.location.host === 'kea.js.org') {
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-103436947-1', 'auto');
        ga('send', 'pageview');
      }
    </script>
  <style type="text/css">/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8;
}

.hljs-comment, .hljs-quote {
  color: #998;
  font-style: italic;
}

.hljs-keyword, .hljs-selector-tag, .hljs-subst {
  color: #333;
  font-weight: bold;
}

.hljs-number, .hljs-literal, .hljs-variable, .hljs-template-variable, .hljs-tag .hljs-attr {
  color: #008080;
}

.hljs-string, .hljs-doctag {
  color: #d14;
}

.hljs-title, .hljs-section, .hljs-selector-id {
  color: #900;
  font-weight: bold;
}

.hljs-subst {
  font-weight: normal;
}

.hljs-type, .hljs-class .hljs-title {
  color: #458;
  font-weight: bold;
}

.hljs-tag, .hljs-name, .hljs-attribute {
  color: #000080;
  font-weight: normal;
}

.hljs-regexp, .hljs-link {
  color: #009926;
}

.hljs-symbol, .hljs-bullet {
  color: #990073;
}

.hljs-built_in, .hljs-builtin-name {
  color: #0086b3;
}

.hljs-meta {
  color: #999;
  font-weight: bold;
}

.hljs-deletion {
  background: #fdd;
}

.hljs-addition {
  background: #dfd;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}

body {
	background: #ffffff;
	margin: 0;
  font-family: 'Helvetica Neue', 'Arial', sans-serif;
}

a {
	color: green;
}

code {
	background: #f8f8f8;
	padding: 2px;
}

.code {
	text-align: left;
	margin: 20px;
}

.description {
	text-align: left;
	margin: 20px;
	line-height: 22px;
}

.example {
	margin: 20px;
}

h1, h2 {
	font-weight: 400;
}

h1, h2 {
	border-bottom: 1px solid #ccc;
	padding-bottom: 10px;
}

h2, h3 {
	margin-top: 40px;
}

.demo {
	background: #f0f0f0;
	padding: 20px;
	margin: 20px 0;
}

.extra-help {
	background: #ffffdd;
	padding: 20px;
	margin: 20px 0;
}

.hljs {
	line-height: 16px;
}

.api-scene {
  margin: 20px;
}

.code-style-bar {
	background: #388e3c;
	height: 24px;
}

.code-style-bar button {
		color: white;
		background: none;
		border: 1px solid #fff;
		cursor: pointer;
		height: 22px;
		margin-top: 1px;
		margin-left: 1px;
		outline: none
	}

.code-style-bar button.active {
  color: #222;
  background: white;
}
</style><style type="text/css">header.body-header nav {
    -webkit-box-sizing: border-box;
            box-sizing: border-box;
    width: 100%;
    background: #fff;
    height: 50px;
    line-height: 50px;

    padding-left: 10px;
    padding-right: 10px;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
  }

    header.body-header nav a {
      text-decoration: none;
      color: #333333;
      text-transform: uppercase;
      font-family: 'Helvetica Neue', 'Arial', sans-serif;
      padding-left: 10px;
      padding-right: 10px;
      font-size: 14px
    }

    header.body-header nav a.active {
    font-weight: bold;
    color: #388e3c;
    border-bottom: 2px solid #388e3c;
    height: 48px;
}

    header.body-header nav a:hover {
    color: #388e3c;
}

    header.body-header nav a.right {
    margin-left: auto;
}

    header.body-header nav a.logo {
    padding: 5px;
}

    header.body-header nav a.opencollective {
    color: #388e3c;
}

    header.body-header nav a .short-text {
        display: none;
}

@media (max-width: 500px) {

    header.body-header nav a .long-text {
          display: none;
    }

    header.body-header nav a .short-text {
          display: inline-block;
    }
}
main section.with-sidebar {
    border-top: 1px solid #e0e0e0;

    display: -webkit-box;

    display: -ms-flexbox;

    display: flex;
    -ms-flex-wrap: nowrap;
        flex-wrap: nowrap;
    -webkit-box-orient: horizontal;
    -webkit-box-direction: normal;
        -ms-flex-direction: row;
            flex-direction: row;
    min-height: calc(100vh - 50px - 1px);
  }
main section.with-sidebar aside.kea-sidebar {
      display: block;
      width: 240px;
      border-right: 1px solid #e0e0e0;
      -webkit-box-sizing: border-box;
              box-sizing: border-box;
      padding: 10px;
      float: left;
    }
main section.with-sidebar .content {
      padding-bottom: 20px;
    }
main section.with-sidebar .content.with-sidebar {
      display: block;
      -webkit-box-flex: 2;
          -ms-flex-positive: 2;
              flex-grow: 2;
      max-width: calc(100% - 240px);
    }
main section.with-sidebar .content.darker {
      background: #eee;
    }
@media (max-width: 767px) {

    main section.with-sidebar {
        display: block;
    }

    main section.with-sidebar aside.kea-sidebar {
        width: 100%;
        border-right: none;
    }

    main section.with-sidebar .content.with-sidebar {
        max-width: 100%;
        padding-top: 20px;
    }
}
aside.kea-sidebar nav .section-title {
      font-weight: strong;
      display: block;
      padding-left: 10px;
      margin-top: 20px;
    }
aside.kea-sidebar nav ul {
      list-style: none;
      padding-left: 10px;
      padding-bottom: 10px;
    }
aside.kea-sidebar nav ul li {
        display: block;
        margin-bottom: 10px;
      }
aside.kea-sidebar nav ul li a {
          color: #333;
          text-decoration: none
        }
aside.kea-sidebar nav ul li a.active {
    color: #388e3c;
    text-decoration: underline;
}
aside.kea-sidebar nav ul li a:hover {
    text-decoration: underline;
}
footer {
  padding: 1px 20px;
  color: #fff;
  background: #3a72a5;
}
footer a {
    color: #ffff00;
  }
</style><style type="text/css">/* Make clicks pass-through */
#nprogress {
  pointer-events: none;
}
#nprogress .bar {
  background: #29d;

  position: fixed;
  z-index: 1031;
  top: 0;
  left: 0;

  width: 100%;
  height: 2px;
}
/* Fancy blur effect */
#nprogress .peg {
  display: block;
  position: absolute;
  right: 0px;
  width: 100px;
  height: 100%;
  box-shadow: 0 0 10px #29d, 0 0 5px #29d;
  opacity: 1.0;

  -webkit-transform: rotate(3deg) translate(0px, -4px);
      -ms-transform: rotate(3deg) translate(0px, -4px);
          transform: rotate(3deg) translate(0px, -4px);
}
/* Remove these to get rid of the spinner */
#nprogress .spinner {
  display: block;
  position: fixed;
  z-index: 1031;
  top: 15px;
  right: 15px;
}
#nprogress .spinner-icon {
  width: 18px;
  height: 18px;
  box-sizing: border-box;

  border: solid 2px transparent;
  border-top-color: #29d;
  border-left-color: #29d;
  border-radius: 50%;

  -webkit-animation: nprogress-spinner 400ms linear infinite;
          animation: nprogress-spinner 400ms linear infinite;
}
.nprogress-custom-parent {
  overflow: hidden;
  position: relative;
}
.nprogress-custom-parent #nprogress .spinner, .nprogress-custom-parent #nprogress .bar {
  position: absolute;
}
@-webkit-keyframes nprogress-spinner {
  0%   { -webkit-transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); }
}
@keyframes nprogress-spinner {
  0%   { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
#nprogress .bar {
		background: #359335;
	}
#nprogress .peg {
		-webkit-box-shadow: 0 0 10px #359335, 0 0 5px #359335;
		        box-shadow: 0 0 10px #359335, 0 0 5px #359335;
	}
#nprogress .spinner-icon {
		border-top-color: #359335;
		border-left-color: #359335;
	}
</style><script type="text/javascript" charset="utf-8">if (!window.__keaPrerender) { window.__keaPrerender = []; }; window.__keaPrerender.push("guideConnected"); </script><style type="text/css"></style></head>
  <body>
    <div id="root"><div><header class="body-header"><nav class="first-level"><a class="" href="/">Home</a><a class="active" href="/guide">Docs</a><a class="" href="/examples">Examples</a><a class="right" href="https://github.com/keajs/kea" target="_blank"><span class="long-text">Github</span><span class="short-text">GH</span></a><a class="opencollective" href="https://opencollective.com/kea" target="_blank"><span class="long-text">OpenCollective</span><span class="short-text">OC</span></a></nav></header><main><section class="with-sidebar"><aside class="kea-sidebar"><nav class="second-level"><div><strong class="section-title">Guide</strong><ul><li><a aria-current="false" href="/guide/installation">Installation</a></li><li><a aria-current="false" href="/guide/counter">Counter</a></li><li><a aria-current="false" href="/guide/counter-dynamic">Dynamic Counter</a></li><li><a aria-current="false" href="/guide/sliders">Sliders</a><small style="margin-left: 10px; color: rgb(170, 170, 170); font-weight: 300;">with kea-saga</small></li><li><a aria-current="false" href="/guide/github">Github API</a><small style="margin-left: 10px; color: rgb(170, 170, 170); font-weight: 300;">with kea-saga</small></li><li><a class="active" aria-current="true" href="/guide/connected">Connected Logic</a></li><li><a aria-current="false" href="/guide/forms">Forms</a><small style="margin-left: 10px; color: rgb(170, 170, 170); font-weight: 300;">with kea-saga</small></li><li><a aria-current="false" href="/guide/migration">Migrating Redux Apps</a></li><li><a aria-current="false" href="/guide/testing">Testing</a></li><li><a aria-current="false" href="/guide/faq">Frequently Asked Questions</a></li></ul></div><div><strong class="section-title">Side effects</strong><ul><li><a aria-current="false" href="/effects/saga">Sagas</a></li><li><a aria-current="false" href="/effects/thunk">Thunks</a></li></ul></div><div><strong class="section-title">API</strong><ul><li><a aria-current="false" href="/api/logic">kea(options)</a></li><li><a aria-current="false" href="/api/component">kea(options)(Component)</a></li><li><a aria-current="false" href="/api/connect">connect(options)</a></li><li><a aria-current="false" href="/api/store">getStore</a></li><li><a aria-current="false" href="/api/reducer">keaReducer</a></li><li><a aria-current="false" href="/api/action">createAction</a></li><li><a aria-current="false" href="/api/reset">resetKeaCache</a></li></ul></div></nav></aside><div class="content with-sidebar"><div><div class="connected-scene"><div class="description"><h2>Example #5 - Connected logic</h2><p>Attaching actions, reducers and selectors to your components will get you pretty far.</p><p>However, there comes a time in every application&apos;s life when that&apos;s no longer enough. Perhaps you need to share code between components? Perhaps you want to separate concerns to make it more readable? Perhaps the logic has grown over 200 lines and really should be yanked out of <code>index.js</code>?</p><p>Whatever the reason, you&apos;re in luck! Kea was originally built just for this. The inline version that we&apos;ve been using until now (<code>@kea({})(Component)</code>) came much later.</p><p>So how do you separate your <strong>logic</strong> from your components?</p><p>Let&apos;s look at a real world example: this guide itself.</p></div><div class="description"><h2>Separating concerns</h2><p>You might have noticed buttons that look like this:</p><p><button>Tell me more!</button></p><p>How do they work?</p><p>When I started writing the guide, I just put this code on top of every component:</p><pre><code class="javascript hljs"><span class="hljs-comment">// index.js</span>
<span class="hljs-keyword">import</span> React, { Component } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>
<span class="hljs-keyword">import</span> PropTypes <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;prop-types&apos;</span>
<span class="hljs-keyword">import</span> { kea } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;kea&apos;</span>

@kea({
  <span class="hljs-attr">actions</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> ({
    <span class="hljs-attr">toggleFeature</span>: <span class="hljs-function">(<span class="hljs-params">feature</span>) =&gt;</span> ({ feature })
  }),
  <span class="hljs-attr">reducers</span>: <span class="hljs-function">(<span class="hljs-params">{ actions }</span>) =&gt;</span> ({
    <span class="hljs-attr">features</span>: [{}, PropTypes.object, {
      [actions.toggleFeature]: <span class="hljs-function">(<span class="hljs-params">state, payload</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> { feature } = payload
        <span class="hljs-keyword">return</span> {
          ...state,
          [feature]: !state[feature]
        }
      }
    }]
  })
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CounterExampleScene</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
  <span class="hljs-comment">// ...</span>

  render () {
    <span class="hljs-keyword">const</span> { features } = <span class="hljs-keyword">this</span>.props
    <span class="hljs-keyword">const</span> { toggleFeature } = <span class="hljs-keyword">this</span>.actions

    <span class="hljs-keyword">return</span> (
      &lt;div&gt;
        &lt;button onClick={() =&gt; toggleFeature(&apos;reducerDetails&apos;)}&gt;{&apos;Tell me more!&apos;}&lt;/button&gt;

        {features.reducerDetails ? (
          &lt;div className=&apos;extra-help&apos;&gt;
            extra help comes here
          &lt;/div&gt;
        ) : null}
      &lt;/div&gt;
    )
  }
}
</code></pre><p>The code is rather straightforward, perhaps just a little bit unfamiliar.</p><p>We have an object, <code>features</code>, which contains booleans that can be toggled on and off. We return a new object every time the action <code>toggleFeature(feature)</code> is called, flipping the boolean for the requested feature.</p><p>While it worked fine, it became repetetive to copy this same code on top of every page in the guide. Code duplication is usually a <button>code smell</button> and should be handled approriately.</p><p>So how do we stop this madness?</p><p>First we must extract the logic to a separate file. Let&apos;s call it <code>features-logic.js</code>:</p><pre><code class="javascript hljs"><span class="hljs-comment">// features-logic.js</span>
<span class="hljs-keyword">import</span> PropTypes <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;prop-types&apos;</span>
<span class="hljs-keyword">import</span> { kea } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;kea&apos;</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> kea({
  <span class="hljs-attr">actions</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> ({
    <span class="hljs-attr">toggleFeature</span>: <span class="hljs-function">(<span class="hljs-params">feature</span>) =&gt;</span> ({ feature })
  }),
  <span class="hljs-attr">reducers</span>: <span class="hljs-function">(<span class="hljs-params">{ actions }</span>) =&gt;</span> ({
    <span class="hljs-attr">features</span>: [{}, PropTypes.object, {
      [actions.toggleFeature]: <span class="hljs-function">(<span class="hljs-params">state, payload</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> { feature } = payload
        <span class="hljs-keyword">return</span> {
          ...state,
          [feature]: !state[feature]
        }
      }
    }]
  })
})
</code></pre><p>You skip the <code>@</code> in front of <code>@kea</code>, but everything else remains the same.</p><p>Then we have a few ways to import it.</p><p>The simplest is to do a drop-in replacement:</p><pre><code class="javascript hljs"><span class="hljs-comment">// index.js</span>
<span class="hljs-keyword">import</span> React, { Component } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>

<span class="hljs-keyword">import</span> featuresLogic <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;../features-logic&apos;</span>

@featuresLogic
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CounterExampleScene</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
  <span class="hljs-comment">// no change here</span>
}
</code></pre><p>That&apos;s simple and works fine, but will only get you so far. There are a few things wrong with this approach:</p><p>First, it&apos;s not clear what you&apos;re importing. As <a href="https://mariusandra.com/blog/2012/09/two-strategies-for-writing-better-code/">code is read far more times than it&apos;s written</a>, it&apos;s very very useful to be as explicit as possible. Your future self will thank you immensely! In this case you have no idea what extra props and actions your component will receive without having to open <code>features-logic.js</code> and checking it out yourself.</p><p>You also don&apos;t know what baggage you&apos;re getting. There might be hundreds of new actions and props, which your relatively simple component will receive. That will slow down the page, as a change in each of them will trigger re-rendering.</p><p>What if one of the props changes? For example the new intern replaces the action <code>toggleFeature</code> with two new actions: <code>setFeature</code> and <code>clearFeature</code>. Without (manually or automatically) clicking the buttons, you won&apos;t know that the action is no longer there. Bummer.</p><p>What&apos;s more, you can&apos;t chain calls like this and you can&apos;t add other actions that only this component will use.</p><p>So what&apos;s the solution? Answer: the <code>@connect({ ... })</code> helper!</p><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React, { Component } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>
<span class="hljs-keyword">import</span> { connect } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;kea&apos;</span>

<span class="hljs-keyword">import</span> featuresLogic <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;../features-logic&apos;</span>
<span class="hljs-keyword">import</span> someOtherLogic <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;../some-other-logic&apos;</span>

@connect({
  <span class="hljs-attr">actions</span>: [
    featuresLogic, [
      <span class="hljs-string">&apos;toggleFeature&apos;</span>
    ]
  ],
  <span class="hljs-attr">props</span>: [
    featuresLogic, [
      <span class="hljs-string">&apos;features&apos;</span>
    ],
    someOtherLogic, [
      <span class="hljs-string">&apos;isMenuOpen&apos;</span>,
      <span class="hljs-string">&apos;isPageLoading&apos;</span>,
      <span class="hljs-string">&apos;highlightTheme&apos;</span>
    ]
  ]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CounterExampleScene</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
  <span class="hljs-comment">// as we were...</span>
  render () {
    <span class="hljs-keyword">const</span> { features, isMenuOpen, isPageLoading, highlightTheme } = <span class="hljs-keyword">this</span>.props
    <span class="hljs-keyword">const</span> { toggleFeature } = <span class="hljs-keyword">this</span>.actions
    <span class="hljs-comment">// ...</span>
  }
}
</code></pre><p>While the syntax may look alien at first, it&apos;s very comfortable to use and optimised for readability.</p><p>With <code>connect</code> you may import as many props and actions from as many logic stores as you like. In case you make a typo (<code>highlghtTheme</code> instead of <code>highlightTheme</code>), you will get an error in the JS console and can fix it immediately. Just connect your logic and use it!</p><p>What if you also want to add actions and reducers only this component will use?</p><p>No problem! Just replace <code>@connect</code> with <code>@kea({ connect: {}, /* other stuff */ })</code> like so:</p><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React, { Component } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>
<span class="hljs-keyword">import</span> { connect } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;kea&apos;</span>

<span class="hljs-keyword">import</span> featuresLogic <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;../features-logic&apos;</span>

@kea({
  <span class="hljs-attr">connect</span>: {
    <span class="hljs-attr">actions</span>: [
      featuresLogic, [
        <span class="hljs-string">&apos;toggleFeature&apos;</span>
      ]
    ],
    <span class="hljs-attr">props</span>: [
      featuresLogic, [
        <span class="hljs-string">&apos;features&apos;</span>
      ]
    ]
  },
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-attr">doSomething</span>: <span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> ({ id })
  },
  <span class="hljs-comment">// ...</span>
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CounterExampleScene</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
  <span class="hljs-comment">// no change here</span>
}
</code></pre><p>If this is not redux-heaven, I don&apos;t know what is!</p><p>Next page: <a href="/guide/forms">Forms</a></p></div></div></div></div></section></main><footer><p>Developing Kea and writing this documentation takes a fair bit of work.</p><p>Please support this work by sponsoring us on <a href="https://opencollective.com/kea" target="_blank">OpenCollective</a>.</p><p>Just <strong>$2/month</strong> will make a huge difference in our mission to develop the best state management solution for React!</p></footer></div></div>
    <script src="/common.bundle.js"></script>
  

</body></html>